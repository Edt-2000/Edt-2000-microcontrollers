<!DOCTYPE html>
<html>

<head>
    <title>WebSockEDT tester</title>
</head>

<body>
    <button class="animationButton" data-name="blink">Blink</button><br>
    <button class="animationButton" data-name="strobo">Strobo</button><br>

    <input class="setting" data-name="text" placeholder="text" /><br>
    <input class="setting" data-name="color1" placeholder="color1" /><br>
    <input class="setting" data-name="color2" placeholder="color2" /><br>
    <input class="setting" data-name="color3" placeholder="color3" /><br>
    <input class="setting" data-name="color4" placeholder="color4" /><br>
    <input class="setting" data-name="color5" placeholder="color5" /><br>
    <input class="setting" data-name="speed" placeholder="speed" /><br>
    <input class="setting" data-name="brightness" placeholder="brightness" /><br>
    <input class="setting" data-name="size" placeholder="size" /><br>

    <script>
        const socket = new WebSocket('ws://10.0.0.25:80/ws');

        socket.onopen = function (event) {
            console.log("WS open!");
        };

        socket.onmessage = function (event) {
            console.log(event);
        };

        socket.onclose = function (event) {
            console.log("WS borked!");
        };

        for (let button of document.getElementsByClassName("animationButton")) {
            button.onclick = function () {
                let message = { animation: button.dataset.name };
                socket.send(JSON.stringify(message));
            };
        };
        for (let setting of document.getElementsByClassName("setting")) {
            setting.onchange = function () {
                let message = {};
                message[setting.dataset.name] = 
                    setting.dataset.name.indexOf("color") == -1 
                    ? setting.value
                    : setting.value.split(",");
                socket.send(JSON.stringify(message));
            };
        };
    </script>
</body>

</html>